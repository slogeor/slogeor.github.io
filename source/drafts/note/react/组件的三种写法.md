---
title:  创建组件的三种写法
categories: note
tags: #文章標籤 可以省略
     - react
---

##### 1. ES5 的 React.createClass

React.creatClass 是最早使用这个方法构建组件类，它接受一个对象为参数，对象中必须要声明一个 `render` 方法。

```js
var React = require('react');
var ReactDOM = require('react-dom');

var SimpleComponent = React.createClass({
    getDefaultProps: function() {
        return {open: false}
    },

    getInitialState: function() {
        return {state: this.props.open}
    },

    handleClick: function() {
        //...
    },

    render: function() {
        var open = this.state.open;

        return (
            <div onClick={this.handleClick.bind(this)}>
                hello world
            </div>
        );
    }
});

ReactDOM.render(
    <SimpleComponent />,
    document.getElementById('app')
);
```

##### 2. ES6 的 React.Component

官方推荐使用这种方式创建有状态的组件。

```js
import React from 'react';
import { render } from 'react-dom';

class SimpleComponent extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            open: this.props.open,
        };
        this.hanleClick = this.handleClick.bind(this);
    }

    handleClick() {
        // ...
    }

    render() {
        let open = this.state.open;
        return (
            <div onClick={this.handleClick}>
                hello world
            </div>
        );
    }
}

SimpleComponent.defaultProps = {
    open: false,
}

render(
    <SimpleComponent />,
    document.getElementById('app')
)
```

##### 3. 无状态的函数写法

无状态组件只负责组件的展示，它的特点是不需要管理 state，数据直接通过 prosp 传入。

```js
const Todo = (props) => (
  <li
    onClick={props.onClick}
    style={{textDecoration: props.complete ? "line-through" : "none"}}
  >
    {props.text}
  </li>
)
```

无状态组件一般会搭配高阶组件一起使用，高阶组件用来托管 state。
Redux 就是通过 store 管理数据源和所有的状态，其中所有负责展示的组件都是使用无状态组件的写法。

##### ES5 和 ES6 对比

* ES5 使用 require 引入模块，ES6 使用 import 引入模块
* ES6 只能在构造函数里初始化 state
* ES5 是自动绑定 this 的，ES6 需要手动绑定 this

### 手动绑定 this 的方法

* 在 constructor 中使用 bind 进行绑定
* 直接在元素上使用 bind 绑定
* 使用箭头函数

### 参考链接

* [http://www.mrfront.com/2017/01/11/react-writing-compare/](http://www.mrfront.com/2017/01/11/react-writing-compare/)
* [http://www.cnblogs.com/wonyun/p/5930333.html](http://www.cnblogs.com/wonyun/p/5930333.html)
